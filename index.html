<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Web Scraper : Web Scraper is a library to build APIs by scraping static sites and use data as models." />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Web Scraper</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/speranskydanil/web_scraper">View on GitHub</a>

          <h1 id="project_title">Web Scraper</h1>
          <h2 id="project_tagline">Web Scraper is a library to build APIs by scraping static sites and use data as models.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/speranskydanil/web_scraper/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/speranskydanil/web_scraper/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="web-scraper" class="anchor" href="#web-scraper"><span class="octicon octicon-link"></span></a>Web Scraper</h1>

<p>Web Scraper is a library to build APIs by scraping static sites and use data as models.</p>

<h3>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h3>

<pre><code>gem install web_scraper

require 'web_scraper'
</code></pre>

<h3>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h3>

<p><strong>Example</strong></p>

<pre><code>require 'web_scraper'

class Article &lt; WebScraper
  resource 'http://hbswk.hbs.edu/topics/it.html'

  base css: '.tile-medium'

  property :title,       xpath: './/h4/a/text()'
  property :date,        xpath: './/li[1]/text()'
  property :category,    xpath: './/li[2]/a/text()'
  property :description, xpath: './/p/text()'

  key :title
end

puts "#{Article.count} articles were found"
puts

articles = Article.all

articles.each do |article|
  header = article.title
  puts header
  puts '=' * header.length
  puts

  subheader = "#{article.date} #{article.category}"
  puts subheader
  puts '-' * subheader.length
  puts

  puts article.description
  puts
end

article =  Article.find('Tech Investment the Wise Way')

puts article.description
</code></pre>

<p><strong>Output</strong></p>

<pre><code>Optimal Auction Design and Equilibrium Selection in Sponsored Search Auctions
=============================================================================

14 Jan 2010 Working Papers
--------------------------

Reserve prices may have an important impact on search advertising marketplaces. But the effect of reserve prices can be opaque, particularly because it is not always straightforward to compare "before" and "after" conditions. HBS professor Benjamin G. Edelman and Yahoo's Michael Schwarz use a pair of mathematical models to predict responses to reserve prices and understand which advertisers end up paying more.

The IT Leaderâ€™s Hero Quest
==========================

11 May 2009 Research &amp; Ideas
----------------------------

Think you could be CIO? Jim Barton is a savvy manager but an IT newbie when he's promoted into the hot seat as chief information officer in , a novel by HBS professors  and  and coauthor . Can Barton navigate his strange new world quickly enough? Q&amp;A with the authors, and book excerpt.
</code></pre>

<h3>
<a name="reference" class="anchor" href="#reference"><span class="octicon octicon-link"></span></a>Reference</h3>

<p><strong>WebScraper.all</strong><br><em>Loads html page, detects appropriate blocks,<br>
wraps them in objects.<br>
The result will be cached.</em></p>

<pre><code>articles = Article.all
</code></pre>

<p><strong>WebScraper.count</strong><br><em>Returns number of objects found.</em></p>

<pre><code>puts "#{Article.count} articles were found"
</code></pre>

<p><strong>WebScraper.reset</strong><br><em>Resets cache of the html data.</em></p>

<pre><code>Article.reset
</code></pre>

<p><strong>WebScraper.find(key)</strong><br><em>Finds first object with required key.</em></p>

<pre><code>article = Article.find('Tech Investment the Wise Way')
</code></pre>

<p><strong>WebScraper.resource(_resource)</strong><br><em>Defines resource -- url of the html page.</em></p>

<pre><code>class Article &lt; WebScraper
  ...
  resource 'http://hbswk.hbs.edu/topics/it.html'
  ...
end
</code></pre>

<p><strong>WebScraper.base(_base)</strong><br><em>Defines base -- selector which determines blocks of content.<br>
You can use css or xpath selectors.</em></p>

<pre><code>class Article &lt; WebScraper
  ...
  base css: '.tile-medium'
  ...
end
</code></pre>

<p><strong>WebScraper.property(*args)</strong><br><em>Defines property -- name (and type optionally) and selector.<br>
You can use css or xpath selectors.<br>
Types determine returning values.<br>
Available types (default is string): string, integer, float, node.<br>
The node option means nokogiri node.</em></p>

<pre><code>class Article &lt; WebScraper
  ...
  property :title,           xpath: './/h4/a/text()'
  property  views: :integer, xpath: './/h4/span/text()'
  ...
end
</code></pre>

<p><strong>WebScraper.key(_key)</strong><br><em>Defines key -- property which will be used in find method.</em></p>

<pre><code>class Article &lt; WebScraper
  ...
  key :title
  ...
end
</code></pre>

<p><strong>WebScraper#css(*args)</strong><br><em>Allows you to use nokogiri css method directly on your object.<br>
It proxies it to nokogiri node.</em></p>

<p><strong>WebScraper#xpath(*args)</strong><br><em>Allows you to use nokogiri xpath method directly on your object.<br>
It proxies it to nokogiri node.</em></p>

<p><strong>WebScraper#property</strong><br><strong>WebScraper#method_missing(name, *args, &amp;block)</strong><br><em>Returns appropriate value for property if found.<br>
Converts it to the defined type.</em></p>

<pre><code>puts article.description
</code></pre>

<p><strong>Author (Speransky Danil):</strong>
<a href="http://dsperansky.info">Personal Page</a> |
<a href="http://ru.linkedin.com/in/speranskydanil/en">LinkedIn</a> |
<a href="https://github.com/speranskydanil?tab=repositories">GitHub</a> |
<a href="http://stackoverflow.com/users/1550807/speransky-danil">StackOverflow</a></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Web Scraper maintained by <a href="https://github.com/speranskydanil">speranskydanil</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
