<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Web Scraper by speranskydanil</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Web Scraper</h1>
      <h2 class="project-tagline">Web Scraper is a library to build APIs by scraping static sites and use data as models.</h2>
      <a href="https://github.com/speranskydanil/web_scraper" class="btn">View on GitHub</a>
      <a href="https://github.com/speranskydanil/web_scraper/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/speranskydanil/web_scraper/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="web-scraper" class="anchor" href="#web-scraper" aria-hidden="true"><span class="octicon octicon-link"></span></a>Web Scraper</h1>

<p>Web Scraper is a library to build APIs by scraping static sites and use data as models.</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<pre><code>gem install web_scraper

require 'web_scraper'
</code></pre>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p><strong>Example</strong></p>

<div class="highlight highlight-ruby"><pre><span class="pl-k">require</span> <span class="pl-s"><span class="pl-pds">'</span>web_scraper<span class="pl-pds">'</span></span>

<span class="pl-k">class</span> <span class="pl-en">Article<span class="pl-e"> &lt; WebScraper</span></span>
  resource <span class="pl-s"><span class="pl-pds">'</span>http://hbswk.hbs.edu/topics/it.html<span class="pl-pds">'</span></span>

  base <span class="pl-c1">css:</span> <span class="pl-s"><span class="pl-pds">'</span>.tile-medium<span class="pl-pds">'</span></span>

  property <span class="pl-c1">:title</span>,       <span class="pl-c1">xpath:</span> <span class="pl-s"><span class="pl-pds">'</span>.//h4/a/text()<span class="pl-pds">'</span></span>
  property <span class="pl-c1">:date</span>,        <span class="pl-c1">xpath:</span> <span class="pl-s"><span class="pl-pds">'</span>.//li[1]/text()<span class="pl-pds">'</span></span>
  property <span class="pl-c1">:category</span>,    <span class="pl-c1">xpath:</span> <span class="pl-s"><span class="pl-pds">'</span>.//li[2]/a/text()<span class="pl-pds">'</span></span>
  property <span class="pl-c1">:description</span>, <span class="pl-c1">xpath:</span> <span class="pl-s"><span class="pl-pds">'</span>.//p/text()<span class="pl-pds">'</span></span>

  key <span class="pl-c1">:title</span>
<span class="pl-k">end</span>

puts <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pse">#{</span><span class="pl-s1"><span class="pl-c1">Article</span>.count</span><span class="pl-pse"><span class="pl-s1">}</span></span> articles were found<span class="pl-pds">"</span></span>
puts

articles <span class="pl-k">=</span> <span class="pl-c1">Article</span>.all

articles.each <span class="pl-k">do </span>|<span class="pl-smi">article</span>|
  header <span class="pl-k">=</span> article.title
  puts header
  puts <span class="pl-s"><span class="pl-pds">'</span>=<span class="pl-pds">'</span></span> <span class="pl-k">*</span> header.length
  puts

  subheader <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pse">#{</span><span class="pl-s1">article.date</span><span class="pl-pse"><span class="pl-s1">}</span></span> <span class="pl-pse">#{</span><span class="pl-s1">article.category</span><span class="pl-pse"><span class="pl-s1">}</span></span><span class="pl-pds">"</span></span>
  puts subheader
  puts <span class="pl-s"><span class="pl-pds">'</span>-<span class="pl-pds">'</span></span> <span class="pl-k">*</span> subheader.length
  puts

  puts article.description
  puts
<span class="pl-k">end</span>

article <span class="pl-k">=</span>  <span class="pl-c1">Article</span>.find(<span class="pl-s"><span class="pl-pds">'</span>Tech Investment the Wise Way<span class="pl-pds">'</span></span>)

puts article.description</pre></div>

<p><strong>Output</strong></p>

<pre><code>Optimal Auction Design and Equilibrium Selection in Sponsored Search Auctions
=============================================================================

14 Jan 2010 Working Papers
--------------------------

Reserve prices may have an important impact on search advertising marketplaces. But the effect of reserve prices can be opaque, particularly because it is not always straightforward to compare "before" and "after" conditions. HBS professor Benjamin G. Edelman and Yahoo's Michael Schwarz use a pair of mathematical models to predict responses to reserve prices and understand which advertisers end up paying more.

The IT Leaderâ€™s Hero Quest
==========================

11 May 2009 Research &amp; Ideas
----------------------------

Think you could be CIO? Jim Barton is a savvy manager but an IT newbie when he's promoted into the hot seat as chief information officer in , a novel by HBS professors  and  and coauthor . Can Barton navigate his strange new world quickly enough? Q&amp;A with the authors, and book excerpt.
</code></pre>

<h2>
<a id="reference" class="anchor" href="#reference" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reference</h2>

<p><strong>WebScraper.all</strong><br>
<em>Loads html page, detects appropriate blocks,<br>
wraps them in objects.<br>
The result will be cached.</em></p>

<pre><code>articles = Article.all
</code></pre>

<p><strong>WebScraper.count</strong><br>
<em>Returns number of objects found.</em></p>

<pre><code>puts "#{Article.count} articles were found"
</code></pre>

<p><strong>WebScraper.reset</strong><br>
<em>Resets cache of the html data.</em></p>

<pre><code>Article.reset
</code></pre>

<p><strong>WebScraper.find(key)</strong><br>
<em>Finds first object with required key.</em></p>

<pre><code>article = Article.find('Tech Investment the Wise Way')
</code></pre>

<p><strong>WebScraper.resource(_resource)</strong><br>
<em>Defines resource -- url of the html page.</em></p>

<pre><code>class Article &lt; WebScraper
  ...
  resource 'http://hbswk.hbs.edu/topics/it.html'
  ...
end
</code></pre>

<p><strong>WebScraper.base(_base)</strong><br>
<em>Defines base -- selector which determines blocks of content.<br>
You can use css or xpath selectors.</em></p>

<pre><code>class Article &lt; WebScraper
  ...
  base css: '.tile-medium'
  ...
end
</code></pre>

<p><strong>WebScraper.property(*args)</strong><br>
<em>Defines property -- name (and type optionally) and selector.<br>
You can use css or xpath selectors.<br>
Types determine returning values.<br>
Available types (default is string): string, integer, float, node.<br>
The node option means nokogiri node.</em></p>

<pre><code>class Article &lt; WebScraper
  ...
  property :title,           xpath: './/h4/a/text()'
  property  views: :integer, xpath: './/h4/span/text()'
  ...
end
</code></pre>

<p><strong>WebScraper.key(_key)</strong><br>
<em>Defines key -- property which will be used in find method.</em></p>

<pre><code>class Article &lt; WebScraper
  ...
  key :title
  ...
end
</code></pre>

<p><strong>WebScraper#css(*args)</strong><br>
<em>Allows you to use nokogiri css method directly on your object.<br>
It proxies it to nokogiri node.</em></p>

<p><strong>WebScraper#xpath(*args)</strong><br>
<em>Allows you to use nokogiri xpath method directly on your object.<br>
It proxies it to nokogiri node.</em></p>

<p><strong>WebScraper#property</strong><br>
<strong>WebScraper#method_missing(name, *args, &amp;block)</strong><br>
<em>Returns appropriate value for property if found.<br>
Converts it to the defined type.</em></p>

<pre><code>puts article.description
</code></pre>

<p><strong>Author (Speransky Danil):</strong>
<a href="http://dsperansky.info">Personal Page</a> |
<a href="http://ru.linkedin.com/in/speranskydanil/en">LinkedIn</a> |
<a href="https://github.com/speranskydanil?tab=repositories">GitHub</a> |
<a href="http://stackoverflow.com/users/1550807/speransky-danil">StackOverflow</a></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/speranskydanil/web_scraper">Web Scraper</a> is maintained by <a href="https://github.com/speranskydanil">speranskydanil</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-48799405-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>

